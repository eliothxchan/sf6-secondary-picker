matchups = {
    "blanka": {
        "blanka": 50,
        "chun": 51.23,
        "luke": 49.06,
        "sim": 54.51,
        "guile": 44,
        "deejay": 47.93,
        "lily": 55.99,
        "ed": 50.76,
        "kim": 52.30,
        "ken": 49.29,
        "jp": 50.25,
        "marisa": 53.19,
        "cammy": 54.64,
        "juri": 49.96,
        "honda": 44.85,
        "rashid": 50.62,
        "ryu": 49.73,
        "jamie": 50.32,
        "aki": 51.63,
        "zangief": 53.59,
        "manon": 53.78
    },
    "chun": {
        "blanka": 48.77,
        "chun": 50,
        "luke": 52.08,
        "sim": 44.58,
        "guile": 50,
        "deejay": 51.04,
        "lily": 45.18,
        "ed": 52.24,
        "kim": 49.67,
        "ken": 52.66,
        "jp": 48.23,
        "marisa": 49.16,
        "cammy": 50.23,
        "juri": 51.37,
        "honda": 51.60,
        "rashid": 50.89,
        "ryu": 52.76,
        "jamie": 48.70,
        "aki": 49.03,
        "zangief": 51.68,
        "manon": 53.73        
    },
    "luke": {
        "blanka": 50.94,
        "chun": 47.92,
        "luke": 50,
        "sim": 50.69,
        "guile": 49.91,
        "deejay": 51.98,
        "lily": 50.42,
        "ed": 48.75,
        "kim": 51.36,
        "ken": 50.59,
        "jp": 53.24,
        "marisa": 49.32,
        "cammy": 48.12,
        "juri": 51.59,
        "honda": 52.40,
        "rashid": 53.92,
        "ryu": 48.45,
        "jamie": 49.45,
        "aki": 52.16,
        "zangief": 48.34,
        "manon": 48.92        
    },
    "sim": {
        "blanka": 45.49,
        "chun": 55.42,
        "luke": 49.31,
        "sim": 50,
        "guile": 48.94,
        "deejay": 46.66,
        "lily": 60.40,
        "ed": 50.04,
        "kim": 41.99,
        "ken": 50.07,
        "jp": 55.47,
        "marisa": 56.94,
        "cammy": 46.11,
        "juri": 49.17,
        "honda": 45.37,
        "rashid": 40.78,
        "ryu": 47.18,
        "jamie": 52.29,
        "aki": 48.41,
        "zangief": 64.29,
        "manon": 55.01        
    },
    "guile": {
        "blanka": 56,
        "chun": 50,
        "luke": 50.09,
        "sim": 51.06,
        "guile": 50,
        "deejay": 50.09,
        "lily": 49.81,
        "ed": 50.96,
        "kim": 49.48,
        "ken": 52.79,
        "jp": 44.80,
        "marisa": 46.27,
        "cammy": 48.72,
        "juri": 51.98,
        "honda": 48.76,
        "rashid": 50.95,
        "ryu": 49.91,
        "jamie": 56.95,
        "aki": 52.11,
        "zangief": 47.08,
        "manon": 50.17        
    },
    "deejay": {
        "blanka": 52.07,
        "chun": 48.96,
        "luke": 48.02,
        "sim": 53.34,
        "guile": 49.91,
        "deejay": 50,
        "lily": 48.18,
        "ed": 53.39,
        "kim": 50.48,
        "ken": 50.50,
        "jp": 50.38,
        "marisa": 46.54,
        "cammy": 52.91,
        "juri": 50.30,
        "honda": 50.73,
        "rashid": 50.85,
        "ryu": 52.13,
        "jamie": 52.37,
        "aki": 49.80,
        "zangief": 46.94,
        "manon": 49.31      
    },
    "lily": {
        "blanka": 44.01,
        "chun": 54.82,
        "luke": 49.58,
        "sim": 39.60,
        "guile": 50.19,
        "deejay": 51.82,
        "lily": 50,
        "ed": 48.15,
        "kim": 47.25,
        "ken": 51.14,
        "jp": 47.16,
        "marisa": 54.80,
        "cammy": 49.98,
        "juri": 51.05,
        "honda": 46.65,
        "rashid": 47.78,
        "ryu": 49.92,
        "jamie": 52.37,
        "aki": 48.28,
        "zangief": 58.09,
        "manon": 50.86      
    },    
    "ed": {
        "blanka": 49.24,
        "chun": 47.76,
        "luke": 51.25,
        "sim": 49.96,
        "guile": 49.04,
        "deejay": 46.61,
        "lily": 51.85,
        "ed": 50,
        "kim": 46.64,
        "ken": 49.34,
        "jp": 50.10,
        "marisa": 52.42,
        "cammy": 49.78,
        "juri": 50.67,
        "honda": 50.08,
        "rashid": 49.61,
        "ryu": 52.39,
        "jamie": 52.71,
        "aki": 48.75,
        "zangief": 55.24,
        "manon": 49.82      
    }, 
    "kim": {
        "blanka": 47.70,
        "chun": 50.33,
        "luke": 48.64,
        "sim": 58.01,
        "guile": 50.52,
        "deejay": 49.52,
        "lily": 52.75,
        "ed": 53.36,
        "kim": 50,
        "ken": 45.58,
        "jp": 56.10,
        "marisa": 50.93,
        "cammy": 49.55,
        "juri": 49.51,
        "honda": 51.50,
        "rashid": 46.46,
        "ryu": 49.78,
        "jamie": 47,
        "aki": 49.67,
        "zangief": 49.22,
        "manon": 51.40      
    }, 
    "ken": {
        "blanka": 50.71,
        "chun": 47.34,
        "luke": 49.41,
        "sim": 49.93,
        "guile": 47.21,
        "deejay": 49.50,
        "lily": 48.86,
        "ed": 50.66,
        "kim": 54.42,
        "ken": 50,
        "jp": 48.86,
        "marisa": 51.36,
        "cammy": 49.63,
        "juri": 51.68,
        "honda": 54.47,
        "rashid": 51.82,
        "ryu": 49.53,
        "jamie": 48.42,
        "aki": 51.31,
        "zangief": 47.32,
        "manon": 50.29   
    }, 
    "jp": {
        "blanka": 49.75,
        "chun": 51.77,
        "luke": 46.76,
        "sim": 44.53,
        "guile": 55.20,
        "deejay": 49.62,
        "lily": 52.84,
        "ed": 49.90,
        "kim": 43.90,
        "ken": 51.14,
        "jp": 50,
        "marisa": 50.69,
        "cammy": 47.40,
        "juri": 45.04,
        "honda": 52.32,
        "rashid": 51.03,
        "ryu": 51.64,
        "jamie": 52.13,
        "aki": 52.62,
        "zangief": 53.33,
        "manon": 51.97   
    }, 
    "marisa": {
        "blanka": 46.81,
        "chun": 50.84,
        "luke": 50.68,
        "sim": 43.06,
        "guile": 53.73,
        "deejay": 53.46,
        "lily": 45.20,
        "ed": 47.58,
        "kim": 49.07,
        "ken": 48.64,
        "jp": 49.31,
        "marisa": 50,
        "cammy": 51.50,
        "juri": 46.58,
        "honda": 53.36,
        "rashid": 49.15,
        "ryu": 50.09,
        "jamie": 50.24,
        "aki": 52,
        "zangief": 51.08,
        "manon": 50.76   
    }, 
    "cammy": {
        "blanka": 45.36,
        "chun": 49.77,
        "luke": 51.88,
        "sim": 53.89,
        "guile": 51.28,
        "deejay": 47.09,
        "lily": 50.01,
        "ed": 50.22,
        "kim": 50.45,
        "ken": 50.37,
        "jp": 52.60,
        "marisa": 48.50,
        "cammy": 50,
        "juri": 50.79,
        "honda": 43.65,
        "rashid": 50.19,
        "ryu": 55.52,
        "jamie": 49.33,
        "aki": 49.03,
        "zangief": 45.52,
        "manon": 49.81   
    },
    "juri": {
        "blanka": 50.04,
        "chun": 48.63,
        "luke": 48.41,
        "sim": 50.83,
        "guile": 48.02,
        "deejay": 49.70,
        "lily": 48.95,
        "ed": 49.33,
        "kim": 50.49,
        "ken": 48.32,
        "jp": 54.96,
        "marisa": 53.42,
        "cammy": 49.21,
        "juri": 50,
        "honda": 48.82,
        "rashid": 48.48,
        "ryu": 50.01,
        "jamie": 50.15,
        "aki": 48.47,
        "zangief": 48.99,
        "manon": 49.26   
    },
    "honda": {
        "blanka": 55.15,
        "chun": 48.40,
        "luke": 47.60,
        "sim": 54.63,
        "guile": 51.24,
        "deejay": 49.27,
        "lily": 53.35,
        "ed": 49.92,
        "kim": 48.50,
        "ken": 45.53,
        "jp": 47.68,
        "marisa": 46.64,
        "cammy": 56.35,
        "juri": 51.18,
        "honda": 50,
        "rashid": 51.25,
        "ryu": 46.68,
        "jamie": 52.07,
        "aki": 49.92,
        "zangief": 49.89,
        "manon": 49.83   
    }, 
    "rashid": {
        "blanka": 49.38,
        "chun": 49.11,
        "luke": 46.08,
        "sim": 59.22,
        "guile": 49.05,
        "deejay": 49.15,
        "lily": 52.22,
        "ed": 50.39,
        "kim": 53.54,
        "ken": 48.18,
        "jp": 48.97,
        "marisa": 50.85,
        "cammy": 49.81,
        "juri": 51.52,
        "honda": 48.75,
        "rashid": 50,
        "ryu": 49.49,
        "jamie": 49.54,
        "aki": 50.25,
        "zangief": 49.30,
        "manon": 49.36   
    }, 
    "ryu": {
        "blanka": 50.27,
        "chun": 47.24,
        "luke": 51.55,
        "sim": 52.82,
        "guile": 50.09,
        "deejay": 47.87,
        "lily": 50.08,
        "ed": 47.61,
        "kim": 50.22,
        "ken": 50.47,
        "jp": 48.36,
        "marisa": 49.91,
        "cammy": 44.48,
        "juri": 49.99,
        "honda": 53.32,
        "rashid": 50.51,
        "ryu": 50,
        "jamie": 49.38,
        "aki": 49.61,
        "zangief": 53.41,
        "manon": 52.86   
    }, 
    "jamie": {
        "blanka": 49.68,
        "chun": 51.30,
        "luke": 50.55,
        "sim": 47.71,
        "guile": 43.05,
        "deejay": 47.63,
        "lily": 47.63,
        "ed": 47.29,
        "kim": 53,
        "ken": 51.58,
        "jp": 47.87,
        "marisa": 49.76,
        "cammy": 50.67,
        "juri": 49.85,
        "honda": 47.93,
        "rashid": 50.46,
        "ryu": 50.62,
        "jamie": 50,
        "aki": 51.75,
        "zangief": 50.95,
        "manon": 50.78   
    }, 
    "aki": {
        "blanka": 48.37,
        "chun": 50.97,
        "luke": 47.84,
        "sim": 51.59,
        "guile": 47.89,
        "deejay": 50.20,
        "lily": 51.72,
        "ed": 51.25,
        "kim": 50.33,
        "ken": 48.69,
        "jp": 47.38,
        "marisa": 48,
        "cammy": 50.97,
        "juri": 51.53,
        "honda": 50.08,
        "rashid": 49.75,
        "ryu": 50.39,
        "jamie": 48.25,
        "aki": 50,
        "zangief": 51.55,
        "manon": 50.19   
    }, 
    "zangief": {
        "blanka": 46.41,
        "chun": 48.32,
        "luke": 51.66,
        "sim": 35.71,
        "guile": 52.92,
        "deejay": 53.06,
        "lily": 41.91,
        "ed": 44.76,
        "kim": 50.78,
        "ken": 52.68,
        "jp": 46.67,
        "marisa": 48.92,
        "cammy": 54.48,
        "juri": 51.01,
        "honda": 50.11,
        "rashid": 50.70,
        "ryu": 46.59,
        "jamie": 49.05,
        "aki": 48.45,
        "zangief": 50,
        "manon": 46.81   
    }, 
    "manon": {
        "blanka": 46.22,
        "chun": 46.27,
        "luke": 51.08,
        "sim": 44.99,
        "guile": 49.83,
        "deejay": 50.69,
        "lily": 49.14,
        "ed": 50.18,
        "kim": 48.60,
        "ken": 49.71,
        "jp": 48.03,
        "marisa": 49.24,
        "cammy": 50.19,
        "juri": 50.74,
        "honda": 50.17,
        "rashid": 50.64,
        "ryu": 47.14,
        "jamie": 49.22,
        "aki": 49.81,
        "zangief": 53.19,
        "manon": 50   
    }, 
}

main = "blanka"
# I do not want to play these characters at all
do_not_want = []
# I will play my main in this matchup no matter what
forced_matchups = []
# Only play sub if winrate is better than this much
better_threshold = 3
# Only play sub if original win rate is lower than this
ok_threshold = 100
# Only play sub if sub's win rate is better than this
sub_threshold = 50

new_winrate = 0
new_char = main

play_matchups = []

overall_stats = []

for character in matchups.keys():
    if character not in do_not_want and character != main:
        best_winrates = []
        matchups_to_play = []

        for enemy in matchups[character].keys():
            
            new_char_winrate = matchups[character][enemy]
            existing_char_winrate = matchups[main][enemy]

            if existing_char_winrate >= ok_threshold or new_char_winrate < sub_threshold or enemy in forced_matchups:
                best_winrates.append(existing_char_winrate)
            elif new_char_winrate - existing_char_winrate >= better_threshold:
                best_winrates.append(new_char_winrate)
                matchups_to_play.append(enemy)
            else:
                best_winrates.append(existing_char_winrate)

        overall_stats.append({
            "character": character,
            "winrate": sum(best_winrates)/len(best_winrates),
            "matchups": matchups_to_play
        })

from operator import attrgetter
stats = sorted(overall_stats, key =lambda item: item["winrate"], reverse=True)


for index, i in enumerate(stats[0:3]):
    print(f"Sub #{index+1} {i['character']}")
    print(f"New combined winrate {i['winrate']}")
    print(f"Play {i['character']} in {i['matchups']}")

